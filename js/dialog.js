import Swiper from"./swiper-bundle.esm.browser.js";const PHOTOS_IN_ALBUMS={1:91,2:70,3:73,4:51,5:45,6:50,7:44,8:58,9:39,10:60,11:42,12:13,13:44,14:28,15:18,16:5,17:8},dialog=document.querySelector(".dialog"),dialogContent=document.querySelector(".dialog__content"),onDialogOutsideClick=e=>{const i=document.querySelector(".dialog");e.target.classList.contains("dialog--open")&&(document.body.classList.remove("scroll-lock"),i.classList.remove("dialog--open"))},createSlide=(e,i)=>`\n    <div class="swiper-slide">\n        <picture class='gallery__image' >\n            <source type="image/webp" srcset="img/pics/albums/${e}/${i}.webp">\n            <img class='gallery__image swiper-lazy' src="img/pics/albums/${e}/${i}.jpg" width="200" height="auto" loading="lazy">\n        </picture>\n    </div>\n`,createSlides=(e,i)=>{let t="";for(let l=1;l<i;l++)t+=createSlide(e,l);return t},onPhotoClick=e=>{if(e.target.closest(".album__item")){document.body.classList.add("scroll-lock");let i=/albums\/(\d+)/i,t=/(\d+)(?:.jpg)/i;const l=e.target.src.match(t)[1]-1,s=e.target.src.match(i)[1],o=PHOTOS_IN_ALBUMS[s],r=`\n            <div class="swiper gallery__photos">\n                <div class="swiper-wrapper">\n                    ${createSlides(s,o)}\n                </div>\n                <div class="gallery__controls">\n                    <div class="gallery__button swiper-button-prev"></div>\n                    <div class="gallery__button swiper-button-next"></div>\n                </div>\n            </div>\n            <div class="swiper gallery__thumbs">\n                <div class="swiper-wrapper">\n                ${createSlides(s,o)}\n                </div>\n            </div>\n        `;dialogContent.innerHTML=r,dialog.classList.add("dialog--open"),dialog.addEventListener("click",onDialogOutsideClick),dialog.addEventListener("close",(()=>{document.body.classList.remove("scroll-lock")}));const a=new Swiper(".gallery__thumbs",{direction:"horizontal",slidesPerView:5,spaceBetween:10,watchSlidesVisibility:!0,watchSlidesProgress:!0,freeMode:!0});new Swiper(".gallery__photos",{initialSlide:l,direction:"horizontal",loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:a}})}},setupModal=()=>{const e=document.querySelector(".album__list");e&&e.addEventListener("click",onPhotoClick)};export{setupModal};