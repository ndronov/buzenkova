import Swiper from"./swiper-bundle.esm.browser.js";const PHOTOS_IN_ALBUMS={1:91,2:70,3:73,4:51,5:45,6:50,7:44,8:58,9:39,10:60,11:42,12:13,13:44,14:28,15:18,16:5,17:8},dialog=document.querySelector(".dialog"),dialogContent=document.querySelector(".dialog__content"),onDialogOutsideClick=e=>{const i=document.querySelector(".dialog");let t=i.getBoundingClientRect();t.top<=e.clientY&&e.clientY<=t.top+t.height&&t.left<=e.clientX&&e.clientX<=t.left+t.width||(document.body.classList.remove("scroll-lock"),i.close())},createSlide=(e,i)=>`\n    <div class="swiper-slide">\n        <picture class='gallery__image' >\n            <source type="image/webp" srcset="img/pics/albums/${e}/${i}.webp">\n            <img class='gallery__image swiper-lazy' src="img/pics/albums/${e}/${i}.jpg" width="200" height="auto" loading="lazy">\n        </picture>\n    </div>\n`,createSlides=(e,i)=>{let t="";for(let l=1;l<i;l++)t+=createSlide(e,l);return t},onPhotoClick=e=>{if(e.target.closest(".album__item")){document.body.classList.add("scroll-lock");const i=e.target.src.split("/")[7].replace(".jpg","")-1,t=e.target.src.split("/")[6],l=PHOTOS_IN_ALBUMS[t],s=`\n            <div class="swiper gallery__photos">\n                <div class="swiper-wrapper">\n                    ${createSlides(t,l)}\n                </div>\n                <div class="gallery__controls">\n                    <div class="gallery__button swiper-button-prev"></div>\n                    <div class="gallery__button swiper-button-next"></div>\n                </div>\n            </div>\n            <div class="swiper gallery__thumbs">\n                <div class="swiper-wrapper">\n                ${createSlides(t,l)}\n                </div>\n            </div>\n        `;dialogContent.innerHTML=s,dialog.showModal(),dialog.addEventListener("click",onDialogOutsideClick),dialog.addEventListener("close",(()=>{document.body.classList.remove("scroll-lock")}));const o=new Swiper(".gallery__thumbs",{direction:"horizontal",slidesPerView:5,spaceBetween:10,watchSlidesVisibility:!0,watchSlidesProgress:!0,freeMode:!0});new Swiper(".gallery__photos",{initialSlide:i,direction:"horizontal",loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:o}})}},setupModal=()=>{const e=document.querySelector(".album__list");e&&e.addEventListener("click",onPhotoClick)};export{setupModal};